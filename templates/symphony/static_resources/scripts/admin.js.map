{"version":3,"sources":["../dev_resources/scripts/admin/__global.js","../dev_resources/scripts/admin/_documentEditor.js","../dev_resources/scripts/admin.js"],"names":["symphony","window","editor","init","externalLink","$","pageSlug","val","attr","siteUrlAlias","resize","resolution","container","toggle","on","e","this","data","removeClass","addClass","admin","activeDocs","deletedDocs","activeContainer","expiredContainer","body","docType","activeView","currentUrl","URI","location","href","_parts","path","socialNetworks","subscribedSites","self","loginTimer","openMenu","handlebarsHelpers","highlightActive","identifySiteSubscriptions","registerEvents","preventDefault","selectModule","length","eq","$selected","each","hide","show","promise","get","done","JSON","parse","link","find","equals","pathname","search","adminHome","home","refresh","getActive","getExpired","loadingIndicator","populateActiveTemplate","populateExpiredTemplate","filteredPages","_","remove","page","deletionDate","empty","append","templates","docsActive","filteredExpiredDocs","objects","event","startDate","totalCount","docsExpired","eventsHome","ev","getEvents","today","moment","utcOffset","format","expiredDocs","filter","i","expiry","getDeleted","filteredExpiredEvents","tempArray","concat","forEach","customHeadContent","tempObject","eventsActive","eventsExpired","events","pressReleasesHome","pr","pressActive","news","storiesHome","st","storiesActive","story","captureActiveView","view","RegExp","exec","propertiesView","properties","catchChanges","is","next","showActiveView","activeDiv","checkMissing","findIndex","property","name","createMissing","propertyItem","propertyName","post","id","value","n","indexOf","socialMedia","saveProperty","el","saveItem","ajax","url","visiblePropertyData","type","beforeSend","error","success","hasClass","parent","push","deleteAll","method","adminUI","throttle","convertToSlug","adminModal","magnificPopup","open","items","src","addTitleModal","createDocument","title","document","collapsibleTrigger","toggleClass","editDocument","tempDelete","successfulResponse","fail","failedResponse","finalDelete","restoreDeleted","togglePublishStatus","toggleFeaturedStatus","starIcon","Handlebars","registerHelper","item","utc","local","lastUpdated","replace","slice","toLowerCase","index","amount","scope","inverse","fn","delay","console","log","oldTitle","newTitle","loginTime","toISOString","logoutTime","add","diffTime","Date","duration","interval","setInterval","minutes","_milliseconds","text","seconds","assign","$navContainer","close","hoverIntent"],"mappings":"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","file":"admin.js","sourcesContent":["var symphony = window.symphony || {};","symphony.editor = {\n\n\tinit: function(){\n\t\tvar externalLink = $('.admin--icon-external');\n\t\tvar pageSlug = $('#urlAlias').val();\n\t\texternalLink.attr('href', '/' + siteUrlAlias + '/' + pageSlug);\n\t\tsymphony.editor.resize();\n\t},\n\n\tresize: function(resolution){\n\t\tvar container = $('.admin--preview-window-inner');\n\t\tvar toggle = $('.admin--resize-toggle');\n\n\t\ttoggle.on('click', function(e){\n\t\t\tvar resolution = $(this).data('resolution');\n\t\t\ttoggle.removeClass('active');\n\t\t\t$(this).addClass('active');\n\t\t\tcontainer.removeClass('desktop tablet mobile').addClass(resolution);\n\t\t});\n\n\t\t\n\t}\n\n}\n\nsymphony.editor.init();","symphony.admin = {\n\n\tactiveDocs: {},\n\tdeletedDocs: {},\n\tactiveContainer: $('.active'),\n\texpiredContainer: $('.expired'),\n\tbody: $('body'),\n\tdocType: '',\n\tactiveView: '',\n\tcurrentUrl: URI(window.location.href)._parts.path,\n\tsocialNetworks: ['Facebook_Page_URL', 'Facebook_Like_URL', 'Twitter_Page_URL', 'Twitter_Like_URL', 'Instagram_Page_URL', 'Pinterest_Page_URL', 'Vine_Page_URL'],\n\tsubscribedSites: [],\n\n\tinit: function(){\n\n\t\tvar self = this;\n\t\tself.loginTimer();\n\t\tself.openMenu();\n\t\tself.handlebarsHelpers();\n\t\tself.highlightActive();\n\t\tself.identifySiteSubscriptions();\n\t\tself.registerEvents();\n\n\t},\n\n\tregisterEvents: function(){\n\t\tvar self = this;\n\n\t\t$('.admin--tree-page-summary').on('click', function(e){\n\t\t\te.preventDefault();\n\t\t});\n\n\t\t$('.admin--editor-sections').on('click', 'div:not(.is-header)', function(e){\n\t\t\tself.selectModule($(this));\n\t\t});\n\n\t\tif ($('.admin--editor-sections>div.is-selected').length > 0) {\n\t\t\tself.selectModule($('.admin--editor-sections>div.is-selected').eq(0));\n\t\t}\n\t},\n\n\tselectModule: function($selected){\n\t\t\t$('.admin--editor-sections>div').each(function(){\n\t\t\t\t$(this).removeClass('is-selected');\n\t\t\t\t$('.' + $(this).data('section')).hide();\n\t\t\t});\n\t\t\t$selected.addClass('is-selected');\n\t\t\t$('.' + $selected.data('section')).show();\n\t},\n\n\tidentifySiteSubscriptions: function(){\n\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/site_subscriptions/all');\n\n\t\tpromise.done(function(data){\n\t\t\tsymphony.admin.subscribedSites = JSON.parse(data);\n\t\t});\n\t},\n\n\thighlightActive: function(){\n\t\t$('.admin--navigation-item').each(function(){\n\t\t\tvar link = URI($(this).find('a').attr('href'));\n\t\t\tif(link.equals(window.location.pathname + window.location.search) === true ) {\n\t\t\t\t$(this).addClass('active');\n\t\t\t}\n\t\t});\n\t},\n\n\tadminHome: function(){\n\n\t\tvar home = this.adminHome; // symphony.admin.adminHome\n\n\t\tsymphony.admin.docType = 'document';\n\n\t\thome.refresh = function(){\n\n\t\t\thome.getActive();\n\t\t\thome.getExpired();\n\t\t\tsymphony.admin.loadingIndicator('off');\n\n\t\t},\n\n\t\thome.getActive = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/site_tree');\n\n\t\t\tpromise.done(function(data){\n\t\t\t\thome.populateActiveTemplate(data);\n\t\t\t});\n\n\t\t},\n\n\t\thome.getExpired = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/recycle_bin/json?start=0&limit=25');\n\n\t\t\tpromise.done(function(data){\n\t\t\t\thome.populateExpiredTemplate(data);\n\t\t\t});\n\n\t\t},\n\n\t\thome.populateActiveTemplate = function(data){\n\t\t\t// push data to compiled handlebars templates, append output to containers defined in config\n\n\t\t\tvar filteredPages = [];\n\n\t\t\t// parse returned data\n\t\t\tsymphony.admin.activeDocs = JSON.parse(data);\n\n\t\t\t// the default json has a bug that includes deleted pages. quick n' dirty way to remove those from active page view.\n\t\t\tfilteredPages = _.remove(symphony.admin.activeDocs, function (page) {\n\t\t\t\treturn page.deletionDate == null;\n\t\t\t});\n\n\t\t\tsymphony.admin.activeDocs = filteredPages; // reassign the updated array to the 'global' var\n\n\t\t\tsymphony.admin.activeContainer.empty().append(symphony.templates.docsActive({page:symphony.admin.activeDocs}));\n\t\t},\n\n\t\thome.populateExpiredTemplate = function(data){\n\n\t\t\tvar filteredExpiredDocs = {};\n\n\t\t\tsymphony.admin.deletedDocs = JSON.parse(data);\n\n\t\t\t// the recycle_bin json returns all docs regardless of type. startDate is a quick n' dirty check for event type.\n\t\t\t// TODO add doctype to this json output in RecycleBinController.java\n\t\t\tfilteredExpiredDocs.objects = _.remove(symphony.admin.deletedDocs.objects, function (event) {\n\t\t\t  return event.startDate == null;\n\t\t\t});\n\n\t\t\t// get new count of events\n\t\t\tsymphony.admin.deletedDocs.totalCount = filteredExpiredDocs.objects.length;\n\n\t\t\t// reassign object back to 'global'\n\t\t\tsymphony.admin.deletedDocs.objects = filteredExpiredDocs.objects;\n\n\t\t\tsymphony.admin.expiredContainer.empty().append(symphony.templates.docsExpired({page:symphony.admin.deletedDocs}));\n\t\t}\n\n\t\thome.refresh();\n\n\t},\n\n\teventsHome: function(){\n\n\t\tvar ev = this.eventsHome; // symphony.symphony.admin.eventsHome\n\n\t\tsymphony.admin.docType = 'events';\n\n\t\tev.refresh = function(){\n\t\t\tev.getEvents();\n\t\t\tsymphony.admin.loadingIndicator('off');\n\t\t},\n\n\t\tev.getEvents = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/events/json?start=0&limit=250');\n\n\t\t\tpromise.done(function(data){\n\t\t\t\tsymphony.admin.activeDocs = JSON.parse(data);\n\t\t\t\tev.getExpired();\n\t\t\t});\n\n\t\t},\n\n\t\tev.getExpired = function(){\n\n\t\t\tvar today = moment().utcOffset(-6).format();\n\n\t\t\tsymphony.admin.expiredDocs = _.filter(symphony.admin.activeDocs.objects, function(i){\n\t\t\t\treturn i.expiry !== null && i.startDate !== null && i.expiry < today;\n\t\t\t});\n\n\t\t\t_.remove(symphony.admin.activeDocs.objects, function(i){\n\t\t\t\treturn i.expiry !== null && i.startDate !== null && i.expiry < today;\n\t\t\t});\n\n\t\t\tsymphony.admin.activeDocs.totalCount = symphony.admin.activeDocs.objects.length;\n\n\t\t\tev.populateActiveTemplate();\n\n\t\t\tev.getDeleted();\n\n\t\t},\n\n\t\tev.getDeleted = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/recycle_bin/json?start=0&limit=25');\n\n\t\t\tpromise.done(function(data){\n\n\t\t\t\tvar filteredExpiredEvents = {};\n\t\t\t\tvar tempArray = [];\n\n\t\t\t\tsymphony.admin.deletedDocs = JSON.parse(data);\n\n\t\t\t\tfilteredExpiredEvents = _.remove(symphony.admin.deletedDocs.objects, function (event) {\n\t\t\t\t  return event.startDate !== null;\n\t\t\t\t});\n\n\t\t\t\ttempArray.objects = _.concat(filteredExpiredEvents, symphony.admin.expiredDocs);\n\n\t\t\t\t// get new count of events\n\t\t\t\tsymphony.admin.deletedDocs.totalCount = tempArray.objects.length;\n\n\t\t\t\t// reassign object back to 'global'\n\t\t\t\tsymphony.admin.deletedDocs.objects = tempArray.objects;\n\n\t\t\t\tev.populateExpiredTemplate();\n\n\t\t\t});\n\n\t\t},\n\n\t\tev.populateActiveTemplate = function(){\n\n\t\t\t// also parse customHeadContent object. mutates global symphony.admin.init.config.activeDocs\n\t\t\t_.forEach(symphony.admin.activeDocs.objects, function(event, i) {\n\t\t\t\tif(event.customHeadContent !== null){\n\t\t\t\t\tvar tempObject = JSON.parse(event.customHeadContent);\n\t\t\t\t\tevent.customHeadContent = tempObject;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsymphony.admin.activeContainer.empty().append(symphony.templates.eventsActive({event:symphony.admin.activeDocs}));\n\n\t\t},\n\n\t\tev.populateExpiredTemplate = function(){\n\t\t\t\n\t\t\tsymphony.admin.expiredContainer.empty().append(symphony.templates.eventsExpired({events:symphony.admin.deletedDocs}));\n\n\t\t}\n\n\t\tev.refresh();\n\t\t\n\t},\n\n\tpressReleasesHome: function(){\n\n\t\tvar pr = this.pressReleasesHome; // symphony.admin.pressReleasesHome\n\n\t\tsymphony.admin.docType = 'news';\n\n\t\tpr.refresh = function(){\n\n\t\t\tpr.getActive();\n\t\t\tsymphony.admin.loadingIndicator('off');\n\n\t\t},\n\n\t\tpr.getActive = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/news/json?page=1&start=0&limit=250');\n\n\t\t\tpromise.done(function(data){\n\t\t\t\tpr.populateActiveTemplate(data);\n\t\t\t});\n\n\t\t},\n\n\t\tpr.populateActiveTemplate = function(data){\n\n\t\t\t// parse returned data\n\t\t\tsymphony.admin.activeDocs = JSON.parse(data);\n\n\t\t\tsymphony.admin.activeContainer.empty().append(symphony.templates.pressActive({news:symphony.admin.activeDocs}));\n\n\t\t},\n\n\t\tpr.refresh();\n\n\t},\n\n\tstoriesHome: function(){\n\n\t\tvar st = this.storiesHome; // symphony.admin.storiesHome\n\n\t\tsymphony.admin.docType = 'story';\n\n\t\tst.refresh = function(){\n\n\t\t\tst.getActive();\n\t\t\tsymphony.admin.loadingIndicator('off');\n\n\t\t},\n\n\t\tst.getActive = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/story/json?page=1&start=0&limit=250');\n\n\t\t\tpromise.done(function(data){\n\t\t\t\tst.populateActiveTemplate(data);\n\t\t\t});\n\n\t\t},\n\n\t\tst.populateActiveTemplate = function(data){\n\n\t\t\t// parse returned data\n\t\t\tsymphony.admin.activeDocs = JSON.parse(data);\n\n\t\t\tsymphony.admin.activeContainer.empty().append(symphony.templates.storiesActive({story:symphony.admin.activeDocs}));\n\n\t\t},\n\n\t\tst.refresh();\n\n\t},\n\n\tcaptureActiveView: function(){\n\t\tvar view = new RegExp('[\\?&amp;]view=([^#]*)').exec(window.location.href);\n\n\t\tif(view) {\n\t\t\tsymphony.admin.activeView = view[1];\n\t\t}\n\t},\n\n\tpropertiesView: function(){\n\n\t\tvar properties = this.propertiesView; //symphony.admin.propertiesView;\n\n\t\tproperties.catchChanges = function(){\n\t\t\t$('input, textarea').on('change keyup', function(){\n\t\t\t\t$(this).addClass('changed');\n\t\t\t\tif ($(this).is(':invalid')) {\n\t\t\t\t\tif($(this).is('input[type=url]')){\n\t\t\t\t\t\t$(this).next('.admin--error-text').removeClass('inactive');\n\t\t\t\t\t}\n\t\t\t\t\t$('.btn-save').addClass('inactive');\n\t\t\t\t} else {\n\t\t\t\t\t$(this).next('.admin--error-text').addClass('inactive');\n\t\t\t\t\t$('.btn-save').removeClass('inactive');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tproperties.showActiveView = function(){\n\n\t\t\tsymphony.admin.captureActiveView();\n\n\t\t\tif(symphony.admin.activeView === ''){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar activeDiv = $('.collapsible[data-view=\"' + symphony.admin.activeView +'\"]');\n\n\t\t\tactiveDiv.addClass('opened');\n\n\t\t\tsymphony.admin.activeContainer = activeDiv.find($('.active'));\n\n\t\t\tif(symphony.admin.activeView === 'socialMedia'){\n\t\t\t\tsymphony.admin.activeContainer = $('.active[data-type=\"'+ symphony.admin.activeView +'\"]');\n\t\t\t\tsymphony.admin.activeView = symphony.admin.socialNetworks;\n\t\t\t}\n\n\t\t},\n\n\t\tproperties.getActive = function(){\n\n\t\t\tvar promise = $.get( '/' + siteUrlAlias + '/admin/site_properties/symphonyserialize');\n\n\t\t\tpromise.done(function(data){\n\t\t\t\tsymphony.admin.activeDocs = JSON.parse(data);\n\t\t\t\tproperties.checkMissing();\n\t\t\t\tproperties.populateActiveTemplate(data);\n\t\t\t});\n\n\t\t},\n\n\t\tproperties.checkMissing = function(){\n\n\t\t\tif(symphony.admin.activeView !== '' && typeof symphony.admin.activeView == 'string') {\n\t\t\t\tif(_.findIndex(symphony.admin.activeDocs.objects, function(property) { \n\t\t\t\t\treturn property.name === symphony.admin.activeView; \n\t\t\t\t}) === -1){\n\t\t\t\t\tproperties.createMissing(symphony.admin.activeView);\n\t\t\t\t}\n\t\t\t} else if(symphony.admin.activeView !== '' && typeof symphony.admin.activeView !== 'string') {\n\t\t\t\t_(symphony.admin.activeView).forEach(function(propertyItem){\n\t\t\t\t\tif(_.findIndex(symphony.admin.activeDocs.objects, function(property) { \n\t\t\t\t\t\treturn property.name === propertyItem \n\t\t\t\t\t}) === -1){\n\t\t\t\t\t\tproperties.createMissing(propertyItem);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\tproperties.createMissing = function(propertyName){\n\n\t\t\tvar promise = $.post('/' + siteUrlAlias + '/admin/site_properties/update', { id: \"\", name: propertyName, value: \" \" } );\n\n\t\t\tpromise.done(function(){\n\t\t\t\tproperties.getActive();\n\t\t\t});\n\n\t\t},\n\n\t\tproperties.populateActiveTemplate = function(){\n\n\t\t\tif(typeof symphony.admin.activeView === 'object') {\n\t\t\t\t_.remove(symphony.admin.activeDocs.objects, function(n) {\n\t\t\t\t\treturn _.indexOf(symphony.admin.activeView, n.name) < 0;\n\t\t\t\t});\n\t\t\t\tsymphony.admin.activeContainer.empty().append(symphony.templates.socialMedia({property:symphony.admin.activeDocs.objects}));\n\t\t\t} else {\n\t\t\t\tsymphony.admin.activeContainer.empty().append(symphony.templates[symphony.admin.activeView]({property:symphony.admin.activeDocs.objects[_.findIndex(symphony.admin.activeDocs.objects, function(property) { return property.name === symphony.admin.activeView; })]}));\n\t\t\t}\n\n\t\t\tproperties.catchChanges();\n\n\t\t},\n\n\t\tproperties.saveProperty = function(el){\n\n\t\t\tif($(el).hasClass('inactive')){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar visiblePropertyData = [];\n\t\t\tvar activeContainer = $('.opened .active');\n\t\t\tvar i = 0;\n\n\t\t\t$.each($(el).parent().parent().find('.changed'), function(){\n\t\t\t\tvisiblePropertyData.push({\n\t\t\t\t\tid: $(this).data('prop'),\n\t\t\t\t\tvalue: $(this).val(),\n\t\t\t\t\tname: $(this).data('name')\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tfunction saveItem(){\n\t\t\t\t$.ajax({\n\t\t\t\t\turl:'/' + siteUrlAlias + '/admin/site_properties/update', \n\t\t\t\t\tdata: { 'id': visiblePropertyData[i].id, 'name': visiblePropertyData[i].name, 'value': visiblePropertyData[i].value, 'siteUrlAlias': siteUrlAlias },\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tbeforeSend: function() {\n\t\t\t\t\t\tsymphony.admin.loadingIndicator('on', activeContainer);\n\t\t\t\t\t},\n\t\t\t\t\terror: function(error) {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tif(i < visiblePropertyData.length){\n\t\t\t\t\t\t\tsaveItem();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsymphony.admin.loadingIndicator('off', activeContainer);\n\t\t\t\t\t\t\tproperties.getActive();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsaveItem();\n\n\t\t},\n\n\t\tproperties.deleteAll = function(){\n\t\t\t_(symphony.admin.activeDocs.objects).forEach(function(property){\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: '/' + siteUrlAlias + '/admin/site_properties/delete/' + property.id, \n\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tproperties.showActiveView();\n\t\tproperties.getActive();\n\t},\n\n\tadminUI: function(){\n\t\tvar self = this;\n\t\t$('#title').on('change input paste keyup', _.throttle( symphony.symphony.admin.convertToSlug, 500 ));\n\t},\n\n\tadminModal: function(el){\n\t\t$.magnificPopup.open({\n\t\t\titems: {\n\t\t\t\tsrc: '#' + el + ''\n\t\t\t},\n\t\t\ttype: 'inline'\n\t\t});\n\t},\n\n\taddTitleModal: function(){\n\t\t$.magnificPopup.open({\n\t\t\titems: {\n\t\t\t\tsrc: '#newPage'\n\t\t\t},\n\t\t\ttype: 'inline'\n\t\t});\n\n\t\tsymphony.admin.createDocument();\n\t},\n\n\tcreateDocument: function(){\n\t\t$('.createPage').on('click', function(e){\n\t\t\te.preventDefault();\n\t\t\tvar title = $(this).parent().find('#docTitle').val();\n\t\t\tif(symphony.admin.docType === 'story') {\n\t\t\t\tdocument.location.href = \"/\" + siteUrlAlias + \"/admin/story_create?storyTitle=\" + title;\n\t\t\t} else if (symphony.admin.docType === 'events') {\n\t\t\t\tdocument.location.href = \"/\" + siteUrlAlias + \"/admin/events_create?eventsTitle=\" + title;\n\t\t\t} else {\n\t\t\t\tdocument.location.href = \"/\" + siteUrlAlias + \"/admin/document_create?dTitle=\" + title;\n\t\t\t}\n\t\t});\n\t},\n\n\tcollapsibleTrigger: function(el){\n\t\t$(el).parent().find('.collapsible').toggleClass('opened');\n\t\t$(el).parent().next('.fa').toggleClass('fa-angle-down');\n\t},\n\n\teditDocument: function(id){\n\t\tif(typeof symphony.admin.docType == 'undefined') {\n\t\t\tsymphony.admin.docType = 'document';\n\t\t}\n\t\twindow.location.href = \"/\" + siteUrlAlias + \"/admin/\" + symphony.admin.docType +\"_editor?documentId=\" + id;\n\t},\n\n\ttempDelete: function(id){\n\t\t\n\t\tvar promise = $.ajax({\n\t\t\turl: '/' + siteUrlAlias + '/admin/document/' + id,\n\t\t\ttype: 'DELETE'\n\t\t});\n\n\t\tpromise.done(function(docType){\n\t\t\tsymphony.admin.successfulResponse(docType)\n\t\t});\n\n\t\tpromise.fail(function(error){\n\t\t\tsymphony.admin.failedResponse(error);\n\t\t});\n\t},\n\n\tfinalDelete: function(id){\n\t\t\n\t\tvar promise = $.ajax({\n\t\t\turl: '/' + siteUrlAlias + '/admin/recycle_bin/delete/' + id,\n\t\t\ttype: 'DELETE'\n\t\t});\n\n\t\tpromise.done(function(docType){\n\t\t\tsymphony.admin.successfulResponse(docType)\n\t\t});\n\n\t\tpromise.fail(function(error){\n\t\t\tsymphony.admin.failedResponse(error);\n\t\t});\n\t},\n\n\trestoreDeleted: function(id){\n\t\t\n\t\tvar promise = $.ajax({\n\t\t\turl: '/' + siteUrlAlias + '/admin/recycle_bin/restore/' + id,\n\t\t\ttype: 'PUT'\n\t\t});\n\n\t\tpromise.done(function(){\n\t\t\tsymphony.admin.successfulResponse()\n\t\t});\n\n\t\tpromise.fail(function(error){\n\t\t\tsymphony.admin.failedResponse(error);\n\t\t});\n\t},\n\n\ttogglePublishStatus: function(el, id){\n\n\t\tif($(el).hasClass('published')){\n\t\t\t$(el).removeClass('published').addClass('unpublished');\n\t\t} else {\n\t\t\t$(el).removeClass('unpublished').addClass('published');\n\t\t}\n\t\t\n\t\tvar promise = $.ajax({\n\t\t\turl: '/' + siteUrlAlias + '/admin/document/publish/' + id,\n\t\t\ttype: 'POST'\n\t\t});\n\n\t\tpromise.done(function(){\n\t\t\tsymphony.admin.successfulResponse();\n\t\t});\n\n\t\tpromise.fail(function(error){\n\t\t\tsymphony.admin.failedResponse(error);\n\t\t});\n\t},\n\n\ttoggleFeaturedStatus: function(el, id){\n\n\t\tvar starIcon = $(el).find('.fa');\n\n\t\tif(starIcon.hasClass('fa-star-o')){\n\t\t\tstarIcon.removeClass('fa-star-o').addClass('fa-star');\n\t\t} else {\n\t\t\tstarIcon.removeClass('fa-star').addClass('fa-star-o');\n\t\t}\n\t\t\n\t\tvar promise = $.ajax({\n\t\t\turl: '/' + siteUrlAlias + '/admin/document/menudisplay/' + id,\n\t\t\ttype: 'POST'\n\t\t});\n\n\t\tpromise.done(function(){\n\t\t\tsymphony.admin.successfulResponse();\n\t\t});\n\n\t\tpromise.fail(function(error){\n\t\t\tsymphony.admin.failedResponse(error);\n\t\t});\n\t},\n\n\thandlebarsHelpers: function(){\n\t\tHandlebars.registerHelper('readableDate', function (item) {\n\t\t\tif(item.deletionDate) {\n\t\t\t\treturn 'Deletion date: ' + moment.utc(item.deletionDate).local().format('M/D/YYYY h:mm:ssA');\n\t\t\t} else if(item.lastUpdated !== null && item.startDate == null) {\n\t\t\t\treturn 'Last updated: ' + moment.utc(item.lastUpdated).local().format('M/D/YYYY h:mm:ssA');\n\t\t\t} else if(item.expiry !== null) {\n\t\t\t\treturn 'Expiration date: ' + moment.utc(item.expiry).local().format('M/D/YYYY h:mm:ssA');\n\t\t\t} else if(item.startDate !== null) {\n\t\t\t\treturn 'Start date: ' + moment.utc(item.startDate).local().format('M/D/YYYY h:mm:ssA');\n\t\t\t}\n\t\t});\n\t\tHandlebars.registerHelper('removeUnderscores', function (name) {\n\t\t\treturn name.replace(/_/g, ' ');\n\t\t});\n\t\tHandlebars.registerHelper('firstWord', function(name){\n\t\t\treturn name.slice(0, name.indexOf(\"_\")).toLowerCase();\n\t\t});\n\t\tHandlebars.registerHelper(\"everyOther\", function (index, amount, scope) {\n\t\t\tif ( ++index % amount ) \n\t\t\t\treturn scope.inverse(this);\n\t\t\telse \n\t\t\t\treturn scope.fn(this);\n\t\t});\n\t},\n\n\tloadingIndicator: function(toggle, el){\n\t\tif(typeof el === 'undefined'){\n\t\t\tel = symphony.admin.body;\n\t\t}\n\t\tif(toggle === 'off'){\n\t\t\t$(el).removeClass('loading');\n\t\t} else {\n\t\t\t$(el).addClass('loading');\n\t\t}\n\t},\n\n\tsuccessfulResponse: function() {\n\t\tvar deletedDoc;\n\t\tsymphony.admin.loadingIndicator('on');\n\t\tif(symphony.admin.docType === 'events') {\n\t\t\t_.delay(symphony.admin.eventsHome.refresh, 1000);\n\t\t} else if(symphony.admin.docType === 'story'){ \n\t\t\t_.delay(symphony.admin.storiesHome.refresh, 1000);\n\t\t} else {\t\t\t\n\t\t\t_.delay(symphony.admin.adminHome.refresh, 1000);\n\t\t}\n\t},\n\n\tfailedResponse: function(error){\n\t\tconsole.log(error);\n\t},\n\n\tconvertToSlug: function(){\n\t\tvar oldTitle = $('#title').val();\n\t\tvar newTitle = oldTitle.toLowerCase().replace(/[^\\w ]+/g,'').replace(/ +/g,'-');\n\t\tif(newTitle.length <= 255) {\n\t\t\t$('#urlAlias').val(newTitle);\n\t\t}\n\t},\n\n\tloginTimer: function(){\n\t\t\n\t\tvar loginTime = moment().toISOString();\n\t\tvar logoutTime = moment(loginTime).add(30, 'minutes').toISOString();\n\n\t\tvar diffTime = Date.parse(logoutTime) - Date.parse(loginTime);\n\n\t\tvar duration = moment.duration(diffTime, 'milliseconds');\n\t\tvar interval = 1000;\n\n\t\tsetInterval(function(){\n\t\t\tduration = moment.duration(duration - interval, 'milliseconds');\n\t\t\tif(duration.minutes() <= 5) {\n\t\t\t\tconsole.log(duration._milliseconds);\n\t\t\t\tif(duration._milliseconds < 300000 && duration._milliseconds >= 1000){\n\t\t\t\t\t$('.admin--countdown').addClass('reveal').text(\"Warning! You will be logged out in \" + duration.minutes() + \" minutes and \" + duration.seconds() + \" seconds! Please refresh or save your changes to stay logged in.\")\n\t\t\t\t} else if(duration._milliseconds <= -1000){\n\t\t\t\t\tlocation.assign('/' + siteUrlAlias + '/admin');\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}, interval);\n\t},\n\n\topenMenu: function() {\n\n\t\tvar $navContainer = $('.admin--navigation-items');\n\n\t\t//$navContainer.addClass('expanded');\n\t\t//_.delay(close, 1000);\n\n\t\tfunction open(){\n\t\t\t$navContainer.addClass('expanded');\n\t\t}\n\n\t\tfunction close(){\n\t\t\t$navContainer.removeClass('expanded');\n\t\t}\n\n\t\t$navContainer.hoverIntent( open, close);\n\n\t}\n\n};"],"sourceRoot":"static_resources/scripts"}